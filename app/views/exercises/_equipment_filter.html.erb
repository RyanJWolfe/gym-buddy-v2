<%# locals: ( f: ) %>

<%# Add a hidden input using the passed-in form builder so the selected equipment_type is submitted %>
<%= f.hidden_field :equipment_type, value: params[:equipment_type] %>

<% content_for :all_equipment_trigger do %>
  <button type="button" class="btn btn-tertiary btn-sm w-full"
          data-search-filter-label="equipment_type"
          data-search-filter-default-text="All Equipment"
          data-action="click->bottom-sheet#open">
    All Equipment
  </button>
<% end %>

<%= render "shared/bottom_sheet", trigger: :all_equipment_trigger, title: "Equipment" do %>
  <div>
    <%# Add an explicit All Equipment option that clears the equipment_type (no filter) %>
    <%= render "shared/bottom_sheet_item", options: {
      label: "All Equipment",
      action: "click->search#onInput click->bottom-sheet#close",
      classes: "text-primary-text",
      data_attributes: {
        search_target: "filter",
        search_label: "equipment_type",
        search_name: "All Equipment",
        search_value: ""
      }
    } %>

    <% Exercise.equipment_types.each do |name, value| %>
      <%= render "shared/bottom_sheet_item", options: {
        label: name.titleize,
        action: "click->search#onInput click->bottom-sheet#close",
        data_attributes: {
          search_target: "filter",
          search_label: "equipment_type",
          search_name: name.titleize,
          search_value: value
        }
      } %>
    <% end %>
  </div>
<% end %>